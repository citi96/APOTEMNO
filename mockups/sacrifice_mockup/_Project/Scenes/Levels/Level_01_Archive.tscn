[gd_scene load_steps=8 format=3 uid="uid://bgeog8lkgdsqo"]

[ext_resource type="Script" uid="uid://bb6k1ctj7aaf5" path="res://_Project/Scripts/Levels/LevelArchiveLogic.cs" id="1_logic"]
[ext_resource type="PackedScene" uid="uid://cjimm8gl2qcup" path="res://_Project/Scenes/Player.tscn" id="2_player"]
[ext_resource type="Script" uid="uid://v6hbdivwq057" path="res://_Project/Scripts/Systems/Interaction/SacrificeAltar.cs" id="3_altar"]
[ext_resource type="Script" uid="uid://beggosduuqk1v" path="res://_Project/Scripts/Systems/Portal.cs" id="4_portal"]

[sub_resource type="StandardMaterial3D" id="Mat_Wood"]
albedo_color = Color(0.4, 0.25, 0.1, 1)

[sub_resource type="BoxShape3D" id="Shape_Portal"]
size = Vector3(2, 4, 1)

[sub_resource type="BoxShape3D" id="Shape_Altar"]

[node name="Level_01_Archive" type="Node3D" node_paths=PackedStringArray("HiddenStaircase", "IllusionWall")]
script = ExtResource("1_logic")
HiddenStaircase = NodePath("Library/Hidden_Section/Staircase")
IllusionWall = NodePath("Library/Hidden_Section/FalseWall")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 5, 0)
light_color = Color(0.9, 0.8, 0.6, 1)
light_energy = 0.5
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]

[node name="Library" type="Node3D" parent="."]

[node name="Floor" type="CSGBox3D" parent="Library"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
use_collision = true
size = Vector3(40, 1, 40)
material = SubResource("Mat_Wood")

[node name="Shelves_1" type="CSGBox3D" parent="Library"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 2, -5)
use_collision = true
size = Vector3(2, 4, 10)
material = SubResource("Mat_Wood")

[node name="Shelves_2" type="CSGBox3D" parent="Library"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 2, -5)
use_collision = true
size = Vector3(2, 4, 10)
material = SubResource("Mat_Wood")

[node name="Hidden_Section" type="Node3D" parent="Library"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -18)

[node name="FalseWall" type="CSGBox3D" parent="Library/Hidden_Section"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
use_collision = true
size = Vector3(4, 4, 1)
material = SubResource("Mat_Wood")

[node name="Staircase" type="Node3D" parent="Library/Hidden_Section"]
visible = false

[node name="Steps" type="CSGBox3D" parent="Library/Hidden_Section/Staircase"]
transform = Transform3D(1, 0, 0, 0, 0.866025, -0.5, 0, 0.5, 0.866025, 0, 2, -5)
use_collision = true
size = Vector3(3, 1, 10)
material = SubResource("Mat_Wood")

[node name="ToOssuaryPortal" type="Area3D" parent="Library/Hidden_Section/Staircase"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, -8)
script = ExtResource("4_portal")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Library/Hidden_Section/Staircase/ToOssuaryPortal"]
shape = SubResource("Shape_Portal")

[node name="Altar_Eyes" type="StaticBody3D" parent="Library"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("3_altar")

[node name="CSGBox3D" type="CSGBox3D" parent="Library/Altar_Eyes"]
size = Vector3(1, 2, 1)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Library/Altar_Eyes"]
shape = SubResource("Shape_Altar")

[node name="Player" parent="." instance=ExtResource("2_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 15)
